<div class="custom-gallery">
  <div class="thumbnails">
    {% for media in product.media %}
      {{ media.preview_image | image_tag:
         class: 'thumbnail-image',
         widths: '80, 100, 120',
         sizes: '(min-width: 768px) 100px, 80px',
         loading: 'lazy',
         alt: media.alt
      }}
    {% endfor %}
  </div>

  <div class="main-image">
    {% assign first_image = product.media | first %}
    {{ first_image | image_tag:
       id: 'main-product-image',
       class: 'main-product-image',
       widths: '400, 600, 800, 1000',
       sizes: '(min-width: 768px) 600px, 100vw',
       loading: 'lazy',
       alt: first_image.alt
    }}
  </div>
</div>
